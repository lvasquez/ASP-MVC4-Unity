(function(e,t){function a(){k.sessionStorage&&(C=sessionStorage.getItem("kendoSkin"),C&&b.changeTheme(C))}function i(a){var i=t.kendoMobileOS;k.sessionStorage&&(t.kendoMobileOS=sessionStorage.getItem("kendoMobileOS")||i),e(a).removeClass(r).addClass("km-"+i),e("#device-wrapper").removeClass("ios android blackberry wp").addClass(i),e("#deviceList .selectedThumb").removeClass("selectedThumb"),e("#deviceList ."+i+"Thumb").parent().addClass("selectedThumb")}function n(){return!1}function o(e){var t=e.split("/");return t[t.length-2]}function s(e,t){var a=t.eq(0),i=t.eq(1);e.siblings().removeClass("active").end().addClass("active"),a.attr("href",e.prev().find("a").attr("href")||a.data("widget")),i.attr("href",e.next().find("a").attr("href")||i.data("widget"))}var r,l,c,d=document,h=e.extend,u=t.kendo,f=".detailHandle",m={show:{effects:"expandVertical fadeIn",duration:300},hide:{effects:"expandVertical fadeIn",duration:300,reverse:!0,hide:!0}},p={show:{effects:"fadeIn",duration:300},hide:{effects:"fadeOut",duration:300}},v=/kendo\.\w+(\.min)?\.(.+)/i,g=/kendo\.dataviz\.(?!min)\w+?(\.css|\.min.css)/gi,k={sessionStorage:function(){try{return sessionStorage.setItem("kendo-test","success!"),sessionStorage.removeItem("kendo-test"),!!sessionStorage.getItem}catch(e){return!1}}(),pushState:"pushState"in history},b={load:function(e){this.unload(),b.fetch(e),k.pushState&&history.pushState({href:e},null,e)},loadWidget:function(e){this.unload(),this.fetchWidget(e),k.pushState&&history.pushState({href:e},null,e)},fetch:function(t,a){var i=e("#exampleWrap"),n=this.href,o=e("#main");(t!==n||a)&&(this.href=t,e.get(t,{partial:1},function(a){i.kendoStop(!0).kendoAnimate(h({},p.hide,{complete:function(){var i=e("#examples-nav li").removeClass("active"),n=e(e.grep(i,function(a){return t.indexOf(e(a).find("a").attr("href"))>-1})).addClass("active");s(n,e("#nav-pager a")),o.replaceWith(a),setTimeout(function(){e("#exampleWrap").css("visibility","visible").kendoStop(!0).kendoAnimate(p.show),b.initMobile()},100)}}))},"html"))},fetchWidget:function(t){var a=e("#mainWrapInner");e.get(t+"?nav=true",function(i){var n,o=t.split("/"),s=o[o.length-2],r=e(".dashboards li").removeClass("active"),l=e(".narrowCol:not(.mobile-devices, .dashboards), .wideCol").find("li").removeClass("active");"dashboards"==s?(l=r,n=function(a){return t==e(a).find("a").attr("href")}):n=function(t){var a=e(t.children[0]).attr("href").split("/");return a[a.length-2]==s},e(e.grep(l,n)).addClass("active"),"dashboards"==s||"overview"==s||"spa"==s?e("#themeWrap").hide():-1==t.indexOf("mobile")&&e("#themeWrap").show(),e("#mainWrap").toggleClass("widgetOverview",t.indexOf("overview")>-1),a.kendoStop(!0).kendoAnimate(h({},p.hide,{complete:function(){a.replaceWith(i),setTimeout(function(){e("#exampleWrap").css("visibility","visible").kendoStop(!0).kendoAnimate(p.show),b.initMobile()},100)}}))},"html")},unload:function(){u.ui&&u.ui.DatePicker&&(u.ui.DatePicker.sharedCalendar=null),u.destroy("body > .k-popup"),e(d.body).find(".k-window-content").each(function(t,a){a=e(a).data("kendoWindow"),a&&(a.setOptions({deactivate:function(){a.destroy()}}),a.close())}),e("#example").find("[data-role=droptargetarea]").length||u.destroy("#example"),e(d).off(".examples").trigger("kendo:pageUnload")},preloadStylesheet:function(t,a){var i=e("<link rel='stylesheet' media='print' href='"+t+"' />").appendTo("head");setTimeout(function(){a(),i.remove()},100)},getCurrentThemeLink:function(){return e("head link").filter(function(){return/kendo\./gi.test(this.href)&&!/common|rtl|dataviz/gi.test(this.href)})},getCurrentDVThemeLink:function(){return e("head link").filter(function(){return g.test(this.href)})},getThemeUrl:function(e){var t=b.getCurrentThemeLink().attr("href");return t.replace(v,"kendo."+e+"$1.$2")},getDVThemeUrl:function(e){var t=b.getCurrentDVThemeLink().attr("href");return t?t.replace(g,"kendo.dataviz."+e+"$1"):void 0},replaceWebTheme:function(a){var i=b.getThemeUrl(a),n=e(d).data("kendoSkin"),o=t.less,s=b.getCurrentThemeLink(),r=/\.less$/.test(s.attr("href")),l=e("#example");b.updateLink(s,i),r&&(e("head style[id^='less']").remove(),o.sheets=e("head link[href$='.less']").map(function(){return this}),o.refresh(!0)),l.length&&(l[0].style.cssText=l[0].style.cssText),b.publishTheme(a),e(d.documentElement).removeClass("k-"+n).addClass("k-"+a)},replaceDVTheme:function(e){var t=b.getDVThemeUrl(e),a=b.getCurrentDVThemeLink();t&&b.updateLink(a,t)},updateLink:function(t,a){var i,n=e("#example");u.support.browser.msie?i=e(d.createStyleSheet(a)):(i=t.eq(0).clone().attr("href",a),t.eq(0).before(i)),n.length&&(n[0].style.cssText=n[0].style.cssText),t.remove()},replaceTheme:function(t){b.replaceWebTheme(t),b.replaceDVTheme(t),e("#example").trigger("kendo:skinChange")},publishTheme:function(t){var a,i,n=["Chart","StockChart","Sparkline","RadialGauge","LinearGauge"];if(u.dataviz)for(a=0;n.length>a;a++)i=u.dataviz.ui[n[a]],i&&(i.fn.options.theme=t);e(d).data("kendoSkin",t)},changeTheme:function(t,a){h(u.dataviz.ui.themes[t].chart,{chartArea:{background:"transparent"}}),b.getThemeUrl(t)!=b.getCurrentThemeLink().attr("href")&&(a?b.preloadStylesheet(b.getThemeUrl(t),function(){var a=e("#example");a.kendoStop().kendoAnimate(h({},p.hide,{complete:function(e){e[0]==a[0]&&(a.css("visibility","hidden"),b.replaceTheme(t),setTimeout(function(){a.css("visibility","visible").kendoStop().kendoAnimate(p.show)},100))}}))}):b.replaceTheme(t))},init:function(){if(e("#exampleWrap").css("visibility","visible"),k.pushState){e(d).on("click","#examples-nav li a",function(t){var a=e(this),i=this.href;t.preventDefault(),location.href.match(i)||(s(a.parent(),e("#nav-pager a")),b.load(i))}).on("click","#nav-pager a",function(t){var a=e(this),i=a.attr("href"),o=a.siblings(),s=a.hasClass("prev")?"prev":"next",r=e("#examples-nav li.active"),l=r[s](),c=e("#nav-pager a").eq("next"==s?1:0),d=c.data("widget");t.preventDefault(),l[0]?(l.addClass("active"),r.removeClass("active"),o.removeClass("k-state-disabled").attr("href",location.href),l=l[s](),l[0]?a.attr("href",l.children("a").attr("href")):a.attr("href",d||"#").toggleClass("k-state-disabled",!d),b.load(i)):d&&(a.add(o).bind("click",n),b.loadWidget(d))}),e(t).bind("popstate",function(e){var t,a=e.originalEvent.state;a&&(t=a.href.toLowerCase(),b.unload(),o(t)!=o(b.href)||t.indexOf("overview")>-1?b.fetchWidget(t):b.fetch(t))}),b.href=location.href;try{history.replaceState({href:location.href},null,location.href)}catch(a){}}e(d).on("mouseenter mouseleave",f,function(t){var a=e(this),i=a.next();e.trim(i.text())&&a.toggleClass("detailHover","mouseenter"==t.type)}).on("click",f,function(){var t=e(this),a=t.next(),i=a.is(":visible");e.trim(a.text())&&(a.kendoStop(!0).kendoAnimate(i?m.hide:m.show,i,function(){e(this).css("height","")}),e(".detailExpanded,.detailCollapsed",this).toggleClass("detailExpanded",!i).toggleClass("detailCollapsed",i),t.toggleClass("detailHandleExpanded",!i))}),b.publishTheme(C),e("#qr").off().click(function(t){var a,i=e("#qrBig");i.toggle(),a=i.is(":visible")?"Hide QR Code":"Show QR Code",e(this).children("em").html(a),t.preventDefault(),t.stopPropagation()}),e("#deviceChooser").mobileOsChooser({container:"#mobile-application-container"})},initMobile:function(){e("#qr").off().click(function(t){var a,i=e("#qrBig");i.toggle(),a=i.is(":visible")?"Hide QR Code":"Show QR Code",e(this).children("em").html(a),t.preventDefault(),t.stopPropagation()}),i("#mobile-application-container")}},C="default";t.kendoMobileOS="ios",e(b.init),r="km-ios km-android km-blackberry km-ios4 km-wp",e.fn.mobileOsChooser=function(t){var a,n,o=e("#deviceList");return 1!=o.length?this:(a=new u.data.DataSource({data:[{text:"iOS",value:"ios"},{text:"Android",value:"android"},{text:"Blackberry",value:"blackberry"},{text:"Windows Phone",value:"wp"}]}),a.read(),i(t.container),n=u.template(e("#deviceThumbTemplate").html()),o.html(u.render(n,a.view())),o.find(".osName,.osThumb").click(function(){var t=e(this).closest("li");if(k.sessionStorage){if(sessionStorage.getItem("kendoMobileOS")===t.children(".osThumb").text())return;sessionStorage.setItem("kendoMobileOS",t.children(".osThumb").text()),t.siblings().removeClass("selectedThumb").end().addClass("selectedThumb"),b.fetch(location.href,!0)}}),this)},e(document).ready(function(){var t=e("#header a[href=#expand]"),a=e("#header").find(".submenu-box");t.click(function(i){var n=e(this);a.fadeOut(),n.toggleClass("expanded"),t.not(n).removeClass("expanded"),n.siblings(".submenu-box").not(":animated").fadeToggle(250),i.stopPropagation(),i.preventDefault()}),e(document).click(function(){a.fadeOut(),t.removeClass("expanded")})}),l=u.ui.Widget,c=l.extend({init:function(t,a){a=a||{},k.sessionStorage&&(a.theme=sessionStorage.getItem("kendoSkin")),a.theme=a.theme||c.prototype.options.theme,l.prototype.init.call(this,t,a),this._render(),this.setTheme(a.theme),this.element.on("click touchend",".tc-link",e.proxy(function(t){t.preventDefault();var a=e(t.target).closest(".tc-link").find(".k-icon"),i=a.hasClass("k-i-arrow-s");a.toggleClass("k-i-arrow-s",!i).toggleClass("k-i-arrow-n",i),this._getThemeContainer().animate({height:"toggle",margin:"toggle",paddingBottom:"toggle"},"fast")},this))},_getThemeContainer:function(){var t=this,a=this.options,i=e(a.listContainer).children(".tc-theme-container");return i.length?i:(i=e("<ul class='tc-theme-container' />").prependTo(a.listContainer),i.on("click",".tc-link",function(a){a.preventDefault();var n=e(this),o=n.attr("data-value");n.hasClass("active")||(i.find(".tc-link").removeClass("active"),n.addClass("active"),t.setTheme(o),b.changeTheme(o,!0))}),i.html(u.render(a.itemTemplate,a.themes)),i)},setTheme:function(e){var t,a,i=this.options.themes;for(a=0;i.length>a;a++)i[a].value==e?(t=i[a],t.selected=!0):i[a].selected=!1;this.element.find(".tc-theme-name").text(t.text),k.sessionStorage&&sessionStorage.setItem("kendoSkin",e)},_render:function(){var e=this.options.label;this.element.addClass("k-theme-chooser").html((e?"<span class='tc-choose-theme'>"+e+"</span>":"")+"<a class='tc-link k-state-selected' href='#'>"+"<span class='tc-theme-name'></span>"+"<span class='k-icon k-i-arrow-s'></span>"+"</a>")},options:{name:"ThemeChooser",label:"Choose theme:",theme:"default",listContainer:"#mainWrapInner",itemTemplate:u.template("<li class='tc-theme'><a href='\\#' class='tc-link#= data.selected ? ' active' : '' #' data-value='#= data.value #'># for (var i = 0; i < data.colors.length; i++) { #<span class='tc-color' style='background-color: #= data.colors[i] #'></span># } #<span class='tc-theme-name'>#= data.text #</span></a></li>",{useWithBlock:!1}),themes:[{text:"Default",value:"default",colors:["#ef6f1c","#e24b17","#5a4b43","#ededed"]},{text:"Blue Opal",value:"blueopal",colors:["#076186","#7ed3f6","#94c0d2","#daecf4"]},{text:"Bootstrap",value:"bootstrap",colors:["#0044cc","#0088cc","#333333","#e6e6e6"]},{text:"Silver",value:"silver",colors:["#298bc8","#515967","#bfc6d0","#eaeaec"]},{text:"Uniform",value:"uniform",colors:["#666666","#cccccc","#e7e7e7","#ffffff"]},{text:"Metro",value:"metro",colors:["#8ebc00","#787878","#e5e5e5","#ffffff"]},{text:"Black",value:"black",colors:["#0167cc","#4698e9","#272727","#000000"]},{text:"Metro Black",value:"metroblack",colors:["#00aba9","#0e0e0e","#333333","#565656"]},{text:"High Contrast",value:"highcontrast",colors:["#b11e9c","#880275","#664e62","#1b141a"]},{text:"Moonlight",value:"moonlight",colors:["#ee9f05","#40444f","#2f3640","#212a33"]}]}}),u.ui.plugin(c),h(t,{Application:b,applyCurrentMobileOS:i,applyCurrentTheme:a,preventFOUC:function(){e("#exampleWrap").css("visibility","hidden")}})})(jQuery,window);